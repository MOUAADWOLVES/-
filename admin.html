<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShadowNet - لوحة التحكم</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="admin-body">
    <div class="admin-login-container" id="loginContainer">
        <div class="admin-login-box">
            <h2>دخول الإدمن</h2>
            <input type="password" id="adminPassword" placeholder="كلمة السر" class="admin-input">
            <button onclick="checkAdminPassword()" class="admin-btn">دخول</button>
            <p id="loginError" class="error-message"></p>
        </div>
    </div>

    <div class="admin-dashboard" id="adminDashboard" style="display:none;">
        <header class="admin-header">
            <h1>لوحة تحكم ShadowNet</h1>
            <button onclick="logout()" class="logout-btn"><i class="fas fa-sign-out-alt"></i> تسجيل خروج</button>
        </header>

        <main class="admin-main">
            <section class="new-post-section">
                <h2>إنشاء منشور جديد</h2>
                <div class="form-group">
                    <label for="postTitle">عنوان المنشور:</label>
                    <input type="text" id="postTitle" class="form-input">
                </div>
                <div class="form-group">
                    <label for="postContent">محتوى المنشور:</label>
                    <textarea id="postContent" class="form-textarea"></textarea>
                </div>
                <div class="form-group">
                    <label for="postImage">رابط الصورة:</label>
                    <input type="text" id="postImage" class="form-input" placeholder="أدخل رابط الصورة">
                </div>
                <button onclick="publishPost()" class="publish-btn"><i class="fas fa-paper-plane"></i> نشر</button>
                <div id="postPreview" class="post-preview"></div>
            </section>

            <section class="existing-posts">
                <h2>المنشورات الحالية</h2>
                <div class="posts-list" id="adminPostsContainer">
                    <!-- المنشورات الحالية ستظهر هنا -->
                </div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
    <script>
    // تأثيرات خاصة بصفحة الإدمن
    document.addEventListener('DOMContentLoaded', function() {
        // تأثير الإدخال الآلي لكلمة السر (للتجربة فقط)
        document.getElementById('adminPassword')?.addEventListener('focus', function() {
            if (this.value === '' && window.location.hostname === 'localhost') {
                const password = ADMIN_PASSWORD;
                let i = 0;
                const typing = setInterval(() => {
                    if (i < password.length) {
                        this.value += password.charAt(i);
                        i++;
                    } else {
                        clearInterval(typing);
                    }
                }, 100);
            }
        });

        // تأثيرات لحقول النموذج
        const formInputs = document.querySelectorAll('.form-input, .form-textarea');
        formInputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'scale(1.02)';
                this.parentElement.style.zIndex = '10';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'scale(1)';
                this.parentElement.style.zIndex = '1';
            });
        });

        // عرض لوحة التحكم بسلاسة
        if (document.getElementById('adminDashboard')) {
            setTimeout(() => {
                document.getElementById('adminDashboard').classList.add('show');
            }, 300);
        }
    });

    // تحميل المنشورات بسلاسة
    function loadAdminPosts() {
        const adminPostsContainer = document.getElementById('adminPostsContainer');
        adminPostsContainer.innerHTML = '';
        
        if (posts.length === 0) {
            adminPostsContainer.innerHTML = '<p class="no-posts">لا توجد منشورات حتى الآن.</p>';
            return;
        }
        
        // فرز المنشورات من الأحدث إلى الأقدم
        const sortedPosts = [...posts].sort((a, b) => new Date(b.date) - new Date(a.date));
        
        sortedPosts.forEach((post, index) => {
            const postElement = document.createElement('div');
            postElement.className = 'post-card';
            postElement.style.opacity = '0';
            postElement.style.transform = 'translateY(20px)';
            postElement.style.transition = `all 0.4s ease ${index * 0.1}s`;
            
            postElement.innerHTML = `
                ${post.image ? `<img src="${post.image}" alt="${post.title}" class="post-image">` : ''}
                <div class="post-content">
                    <h3 class="post-title">${post.title}</h3>
                    <span class="post-date">${formatDate(post.date)}</span>
                    <p>${post.content}</p>
                    <button onclick="deletePost(${posts.indexOf(post)})" class="delete-btn">
                        <i class="fas fa-trash"></i> حذف
                    </button>
                </div>
            `;
            
            adminPostsContainer.appendChild(postElement);
            
            // تأخير ظهور العنصر لتنفيذ الحركة
            setTimeout(() => {
                postElement.style.opacity = '1';
                postElement.style.transform = 'translateY(0)';
            }, 10);
        });
    }

    // تحسين زر الحذف
    function deletePost(index) {
        if (confirm('هل أنت متأكد من حذف هذا المنشور؟')) {
            const postElement = document.querySelectorAll('.post-card')[index];
            postElement.style.transform = 'translateX(100%)';
            postElement.style.opacity = '0';
            
            setTimeout(() => {
                posts.splice(index, 1);
                localStorage.setItem('shadowNetPosts', JSON.stringify(posts));
                loadAdminPosts();
                showAlert('تم حذف المنشور بنجاح', 'success');
            }, 500);
        }
    }
    </script>
</body>
</html>
